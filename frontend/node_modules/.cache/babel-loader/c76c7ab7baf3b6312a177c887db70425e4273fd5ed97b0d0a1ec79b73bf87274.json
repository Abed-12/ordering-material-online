{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nfunction RefrshHandler({\n  setIsAuthenticated\n}) {\n  _s();\n  const location = useLocation(); // الموقع الحالي\n  const navigate = useNavigate(); // التنقل بين المسارات\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const role = localStorage.getItem('role'); // استرجاع نوع المستخدم\n\n    if (token) {\n      var _allowedPaths$role;\n      setIsAuthenticated(true);\n\n      // تحديد المسارات المسموحة لكل نوع مستخدم\n      const allowedPaths = {\n        supplier: ['/supplier-login', '/supplier-signup', '/supplier/home'],\n        company: ['/company-login', '/company-signup', '/company/home'],\n        admin: ['/admin', '/admin/home']\n      };\n\n      // إذا كان المستخدم يحاول الوصول لمسار غير مسموح به\n      if (!((_allowedPaths$role = allowedPaths[role]) !== null && _allowedPaths$role !== void 0 && _allowedPaths$role.includes(location.pathname))) {\n        navigate(`/${role}-login`, {\n          replace: true\n        });\n      }\n    } else {\n      // إذا لم يكن المستخدم مصادقًا عليه\n      if (!['/supplier-login', '/company-login', '/admin'].includes(location.pathname)) {\n        navigate('/supplier-login', {\n          replace: true\n        });\n      }\n    }\n  }, [location, navigate, setIsAuthenticated]);\n  return null; // هذا المكون لا يعرض شيئًا في واجهة المستخدم\n}\n_s(RefrshHandler, \"fPjCxODVr6jVvib6o2c9VLE4s84=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = RefrshHandler;\nexport default RefrshHandler;\nvar _c;\n$RefreshReg$(_c, \"RefrshHandler\");","map":{"version":3,"names":["useEffect","useLocation","useNavigate","RefrshHandler","setIsAuthenticated","_s","location","navigate","token","localStorage","getItem","role","_allowedPaths$role","allowedPaths","supplier","company","admin","includes","pathname","replace","_c","$RefreshReg$"],"sources":["C:/Users/A.A12/Desktop/login-admin/frontend/src/RefrshHandler.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nfunction RefrshHandler({ setIsAuthenticated }) {\n    const location = useLocation(); // الموقع الحالي\n    const navigate = useNavigate(); // التنقل بين المسارات\n\n    useEffect(() => {\n        const token = localStorage.getItem('token');\n        const role = localStorage.getItem('role'); // استرجاع نوع المستخدم\n        \n        if (token) {\n            setIsAuthenticated(true);\n\n            // تحديد المسارات المسموحة لكل نوع مستخدم\n            const allowedPaths = {\n                supplier: ['/supplier-login', '/supplier-signup', '/supplier/home'],\n                company: ['/company-login', '/company-signup', '/company/home'],\n                admin: ['/admin', '/admin/home'],\n            };\n\n            // إذا كان المستخدم يحاول الوصول لمسار غير مسموح به\n            if (!allowedPaths[role]?.includes(location.pathname)) {\n                navigate(`/${role}-login`, { replace: true });\n            }\n        } else {\n            // إذا لم يكن المستخدم مصادقًا عليه\n            if (!['/supplier-login', '/company-login', '/admin'].includes(location.pathname)) {\n                navigate('/supplier-login', { replace: true });\n            }\n        }\n    }, [location, navigate, setIsAuthenticated]);\n\n    return null; // هذا المكون لا يعرض شيئًا في واجهة المستخدم\n}\n\nexport default RefrshHandler;\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAE3D,SAASC,aAAaA,CAAC;EAAEC;AAAmB,CAAC,EAAE;EAAAC,EAAA;EAC3C,MAAMC,QAAQ,GAAGL,WAAW,CAAC,CAAC,CAAC,CAAC;EAChC,MAAMM,QAAQ,GAAGL,WAAW,CAAC,CAAC,CAAC,CAAC;;EAEhCF,SAAS,CAAC,MAAM;IACZ,MAAMQ,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,IAAI,GAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;;IAE3C,IAAIF,KAAK,EAAE;MAAA,IAAAI,kBAAA;MACPR,kBAAkB,CAAC,IAAI,CAAC;;MAExB;MACA,MAAMS,YAAY,GAAG;QACjBC,QAAQ,EAAE,CAAC,iBAAiB,EAAE,kBAAkB,EAAE,gBAAgB,CAAC;QACnEC,OAAO,EAAE,CAAC,gBAAgB,EAAE,iBAAiB,EAAE,eAAe,CAAC;QAC/DC,KAAK,EAAE,CAAC,QAAQ,EAAE,aAAa;MACnC,CAAC;;MAED;MACA,IAAI,GAAAJ,kBAAA,GAACC,YAAY,CAACF,IAAI,CAAC,cAAAC,kBAAA,eAAlBA,kBAAA,CAAoBK,QAAQ,CAACX,QAAQ,CAACY,QAAQ,CAAC,GAAE;QAClDX,QAAQ,CAAC,IAAII,IAAI,QAAQ,EAAE;UAAEQ,OAAO,EAAE;QAAK,CAAC,CAAC;MACjD;IACJ,CAAC,MAAM;MACH;MACA,IAAI,CAAC,CAAC,iBAAiB,EAAE,gBAAgB,EAAE,QAAQ,CAAC,CAACF,QAAQ,CAACX,QAAQ,CAACY,QAAQ,CAAC,EAAE;QAC9EX,QAAQ,CAAC,iBAAiB,EAAE;UAAEY,OAAO,EAAE;QAAK,CAAC,CAAC;MAClD;IACJ;EACJ,CAAC,EAAE,CAACb,QAAQ,EAAEC,QAAQ,EAAEH,kBAAkB,CAAC,CAAC;EAE5C,OAAO,IAAI,CAAC,CAAC;AACjB;AAACC,EAAA,CA/BQF,aAAa;EAAA,QACDF,WAAW,EACXC,WAAW;AAAA;AAAAkB,EAAA,GAFvBjB,aAAa;AAiCtB,eAAeA,aAAa;AAAC,IAAAiB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}